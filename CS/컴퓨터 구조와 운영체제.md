# 컴퓨터 구조와 운영체제

운영체제에 앞서 운영체제를 담는 컴퓨터에 대해 알아보자.

컴퓨터 구성 요소는 **CPU, 메모리, 입출력장치, 시스템버스**로 구분

- **CPU(Central Processing Unit, 중앙처리장치)**: 명령어를 해석하여 실행하는 장치
- **메모리**: 데이터의 상태, 명령어 등을 기록하는 장치로 주기억장치, 보조기억장치로 구분
  - 주기억장치: 작업에 필요한 프로그램과 데이터를 저장하는 장소. 일반적으로 **메모리를 말하면 주기억장치를 말하며 특히 램(RAM)**을 가르키는 경우가 많음
  - 보조기억장치: 보조메모리라고 불리며 데이터를 일시적 또는 영구적으로 저장하는 장소. 흔히 HDD, SDD를 가르키는 경우가 많으며, 2차 기억 장치의 역할을 함
- **입출력장치**: 키보드, 스피커, 마우스 등
- **시스템버스**: 위의 각각 구성요소를 연결하고 데이터를 주고 받게 해주는 역할

<hr>

## 운영체제(OS, Operationg System)

- **컴퓨터 시스템을 운영하고 관리하는 소프트웨어**
- 실행되는 응용 프로그램들이 메모리와 CPU, 입출력 장치 등의 자원을 사용할 수 있도록 지원 [위키백과](https://ko.wikipedia.org/wiki/%EC%9A%B4%EC%98%81_%EC%B2%B4%EC%A0%9C)<br>
- 운영체제의 종류로는 Window, MacOS, Linux(ubuntu, centos), Unix 등

## 프로세스(Process)와 스레드(Thread)

### 프로세스

프로세스는 프로그램 코드들이 저장장치에 저장된 정적인 상태에서 실행을 위해 **주메모리에 올라온 동적인 상태**

프로세스는 운영체제의 제어를 통해 R(실행, Running), W(대기, Waiting), S(중단, Stopped), Z(좀비, Zombie)의 상태로 존재한다.

- PID는 위 생성된 프로세스의 고유한 ID
- 최상위 프로세스는 `systemd`
  - 리눅스 기준 `ps -ef | grep systemd` 를 한다면, systemd의 PID가 1인 것을 확인할 수 있다.
- 프로세스는 기본적으로 자식 프로세스를 가질 수 있는데, 부모가 종료되면 자식 프로세스도 종료된다._(정확히는 부모프로세스가 자식프로세스가 종료될 때까지 기다린다.)_

  - ps 명령어를 통해 확인할 때, PID는 자기자신 프로세스 ID, PPID가 부모 프로세스이다.

- 데몬 프로세스는 백그라운드로 실행되는 프로세스를 뜻하며, 일반적으로 컴퓨터 부팅시 실행하며 프로세스 끝에 d가 붙는다. _d의 의지..!_
- 프로세스끼리 통신하기 위해 IPC가 필요하다. IPC는 프로세스간 데이터 통신 행위, 또는 그 방법 경로를 뜻한다. 알아만 두자.

- 프로세스의 구성 요소로는 code, data, heap, stack이 있다.
  - heap은 동적으로 생기는 데이터를 저장하는 공간으로 대표적으로 객체가 생성될 때 저장되는 공간
  - data는 정적인 데이터로 전역변수, static 변수 등이 포함
  - stack은 스레드마다 할당되며 지역변수, 함수 실행에 사용

### 스레드

CPU는 프로세스가 해야할 작업을 수행하는데, **프로세스 내에서 실행되는 여러 작업의 단위가 스레드**

### 멀티 스레딩(Multi Threading)

스레드가 한 개만 동작할 때 싱글 스레드라하며, 여러 스레드가 동작하면 멀티 스레딩

프로세스 안에서 스레드는 독립적으로 수행하기 위해 두 가지 정보를 가진다.

- Program Counter: 프로그램 내의 작업 실행위치 정보 저장
- Stack: 함수를 호출하는 순서(function call) 정보 저장

멀티 스레딩에서 스레드는 **다수의 스레드끼리 메모리 공유와 통신**이 가능

- 메모리 공간을 작업마다 독립적으로 가질 필요가 없으므로 Light weight process라고도 불림
<!-- - 메모리 공유와 통신이 가능하기 때문에, 자원의 낭비를 막고 효율성을 향상 시킬 수 있음 -->

- 단, 위의 이유로 하나의 스레드에서 문제가 생기면 전체 프로세스에 영향을 미치게 됨

  - ## (동기화 이슈) 한 자원은 하나의 스레드만 가질 수 있도록 동기화 해주는 작업이 필요

- 스레드는 사용자 수준 스레드와 <sup>\*</sup>커널 수준 스레드로 구분
  - 파이썬에서는 사용자 수준 스레드에서 동작
  - <sup>\*</sup>커널: 운영체제에서 핵심역할을 하는 요소

> 참고1: [인프런, 파이썬 동시성 프로그래밍](https://www.inflearn.com/course/%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EB%8F%99%EC%8B%9C%EC%84%B1-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D) <br>
> 참고1: [[운영체제(OS)] 1. 운영체제란?](https://velog.io/@codemcd/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS-1.-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%9E%80) <br>
> 참고2: [[Linux] 프로세스(Process) 및 쓰레드(Thread) 개념](https://eehoeskrap.tistory.com/244) <br>
> 참고3: [그랩님 - 운영체제](https://www.notion.so/4e2c2662edf4480283af6ae0628534a5#6f41a75192cf44a9ad094046186b855d)
